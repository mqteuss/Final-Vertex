<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator Avan√ßado de FIIs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Pequenos ajustes para anima√ß√µes e scrollbars */
        .loader { border-top-color: #6366f1; animation: spinner 1.5s linear infinite; }
        @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        pre::-webkit-scrollbar { width: 8px; height: 8px; }
        pre::-webkit-scrollbar-track { background: #1e293b; border-radius: 4px; }
        pre::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    </style>
</head>
<body class="min-h-screen bg-slate-100 p-4 md:p-8 text-slate-800 font-sans pb-24">

    <div class="max-w-5xl mx-auto space-y-6">
        
        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="bg-indigo-100 p-3 rounded-xl">
                    <i data-lucide="layers" class="text-indigo-600 w-8 h-8"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-slate-900">Extrator Avan√ßado de FIIs</h1>
                    <div class="text-sm text-slate-500 mt-1 flex items-center gap-3">
                        <p>Extraia a API oculta do StatusInvest diretamente para o seu projeto.</p>
                        <span id="chatBadge" class="hidden items-center gap-1 bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-semibold animate-pulse">
                            <i data-lucide="message-circle" class="w-3 h-3"></i> Chatbot Ativo
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 space-y-4">
            <h2 class="text-sm font-semibold text-slate-400 uppercase tracking-wider flex items-center gap-2 mb-4">
                <i data-lucide="settings" class="w-4 h-4"></i> Par√¢metros da Consulta
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">C√≥digo (Ticker)</label>
                    <div class="relative">
                        <input type="text" id="ticker" value="GARE11" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none uppercase font-mono pr-10" placeholder="Ex: SNAG11">
                        <i data-lucide="loader-2" id="detectingSpinner" class="hidden absolute right-3 top-2.5 w-5 h-5 text-indigo-500 animate-spin"></i>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Categoria</label>
                    <select id="assetType" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none font-medium text-indigo-700 bg-indigo-50 transition-colors">
                        <option value="fii">FIIs</option>
                        <option value="fiagro">Fiagros</option>
                        <option value="acoes">A√ß√µes</option>
                        <option value="bdrs">BDRs</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Ponto de Acesso (Endpoint)</label>
                    <select id="endpoint" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                        </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Estrutura de Retorno (Type)</label>
                    <select id="dataType" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none disabled:bg-slate-100 disabled:text-slate-400">
                        <option value="0">Tipo 0 (Padr√£o/Mensal)</option>
                        <option value="1">Tipo 1 (Anual/Alternativo)</option>
                        <option value="2">Tipo 2 (M√°ximo)</option>
                    </select>
                </div>
            </div>

            <div id="rangeOptions" class="hidden grid-cols-2 gap-4 mt-4 p-4 bg-slate-50 rounded-xl border border-slate-200">
                <div>
                    <label class="block text-xs font-medium text-slate-600 mb-1">Ano Inicial</label>
                    <input type="number" id="rangeMin" value="2020" class="w-full px-3 py-1.5 border border-slate-300 rounded-md text-sm">
                </div>
                <div>
                    <label class="block text-xs font-medium text-slate-600 mb-1">Ano Final</label>
                    <input type="number" id="rangeMax" class="w-full px-3 py-1.5 border border-slate-300 rounded-md text-sm">
                </div>
            </div>
        </div>

        <div class="flex bg-white rounded-t-2xl border-b border-slate-200 overflow-hidden shadow-sm">
            <button id="tabConsole" class="flex-1 py-4 font-medium text-sm flex justify-center items-center gap-2 transition-colors bg-indigo-50 text-indigo-700 border-b-2 border-indigo-600">
                <i data-lucide="terminal" class="w-5 h-5"></i> M√©todo 1: Script de Consola (Recomendado)
            </button>
            <button id="tabProxy" class="flex-1 py-4 font-medium text-sm flex justify-center items-center gap-2 transition-colors text-slate-600 hover:bg-slate-50">
                <i data-lucide="code" class="w-5 h-5"></i> M√©todo 2: Proxy Interno
            </button>
        </div>

        <div id="contentConsole" class="bg-white p-6 rounded-b-2xl shadow-sm border border-slate-200 border-t-0 space-y-5">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                <p class="text-sm text-slate-600">Copie o script abaixo e cole-o na consola (F12) da p√°gina do StatusInvest.</p>
                <div class="flex bg-slate-100 p-1 rounded-lg">
                    <button id="btnSingleScript" class="px-3 py-1.5 text-xs font-medium rounded-md transition-colors bg-white shadow-sm text-indigo-700">Extrair Apenas 1 M√©trica</button>
                    <button id="btnBatchScript" class="px-3 py-1.5 text-xs font-medium rounded-md transition-colors text-slate-500 hover:text-slate-700">Extra√ß√£o Completa</button>
                </div>
            </div>

            <div class="relative group">
                <div class="absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <button id="btnCopyScript" class="bg-emerald-500 hover:bg-emerald-600 text-white text-sm font-medium px-4 py-2 rounded-lg flex items-center gap-2 shadow-lg cursor-pointer">
                        <i data-lucide="copy" class="w-4 h-4"></i> Copiar C√≥digo
                    </button>
                </div>
                <pre class="bg-slate-900 text-emerald-400 p-5 rounded-xl overflow-x-auto text-sm leading-relaxed shadow-inner border border-slate-800"><code id="codeBlock"></code></pre>
            </div>
            
            <div class="bg-amber-50 border border-amber-200 p-4 rounded-xl flex gap-3 text-amber-800 text-sm">
                <i data-lucide="alert-triangle" class="w-5 h-5 flex-shrink-0"></i>
                <p><strong>Porqu√™ este m√©todo?</strong> O StatusInvest tem bloqueios de seguran√ßa r√≠gidos (Cloudflare). Ao executar o script diretamente no site deles atrav√©s da Consola, contornamos esses bloqueios porque o pedido √© feito utilizando a sua sess√£o e cookies de utilizador aut√™nticos.</p>
            </div>
        </div>

        <div id="contentProxy" class="hidden bg-white p-6 rounded-b-2xl shadow-sm border border-slate-200 border-t-0 space-y-4">
            <button id="btnExtractProxy" class="w-full bg-slate-800 hover:bg-slate-900 text-white font-semibold py-3 px-6 rounded-xl transition-all disabled:opacity-50 flex justify-center items-center gap-2 shadow-sm cursor-pointer">
                Tentar Extra√ß√£o Direta
            </button>

            <div id="errorMsg" class="hidden bg-red-50 text-red-700 p-4 rounded-xl text-sm border border-red-200 flex flex-col gap-2"></div>

            <div id="dataContainer" class="hidden mt-6 border border-slate-200 rounded-xl overflow-hidden shadow-sm">
                <div class="bg-slate-50 border-b border-slate-200 p-3 flex justify-between items-center">
                    <h3 class="text-sm font-semibold text-slate-700 flex items-center gap-2">
                        <i data-lucide="file-json" class="w-4 h-4 text-indigo-500"></i> Resposta do Servidor
                    </h3>
                    <button id="btnCopyJson" class="text-xs flex items-center gap-1 bg-white border border-slate-300 px-3 py-1.5 rounded-lg text-slate-600 hover:bg-slate-50 transition-colors cursor-pointer">
                        <i data-lucide="copy" class="w-3 h-3"></i> Copiar JSON
                    </button>
                </div>
                <div class="bg-slate-900 p-0">
                    <pre id="jsonBlock" class="text-green-400 p-4 overflow-auto text-xs max-h-96 font-mono"></pre>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Inicializar √≠cones
        lucide.createIcons();

        // Estado Global
        let state = {
            assetType: 'fii',
            ticker: 'GARE11',
            endpoint: 'getpatrimonioliquido',
            dataType: '0',
            rangeMin: '2020',
            rangeMax: new Date().getFullYear().toString(),
            scriptType: 'single',
            activeTab: 'console',
            proxyData: null
        };

        const endpoints = [
            { id: 'getpatrimonioliquido', name: 'Patrim√≥nio L√≠quido', param: 'code' },
            { id: 'getreceitas', name: 'Receitas', param: 'code' },
            { id: 'getdespesas', name: 'Despesas', param: 'code' },
            { id: 'getcaixa', name: 'Caixa', param: 'code' },
            { id: 'getresultado', name: 'Resultado', param: 'code' },
            { id: 'demonstracoestrimestrais', name: 'Demonstra√ß√µes Trimestrais (Requer Anos)', param: 'code', requiresRange: true },
            { id: 'companytickerprovents', name: 'Proventos / Dividendos', param: 'companyName', extraParam: '&chartProventsType=1' }
        ];

        // Elementos DOM
        const els = {
            ticker: document.getElementById('ticker'),
            assetType: document.getElementById('assetType'),
            endpoint: document.getElementById('endpoint'),
            dataType: document.getElementById('dataType'),
            rangeMin: document.getElementById('rangeMin'),
            rangeMax: document.getElementById('rangeMax'),
            rangeOptions: document.getElementById('rangeOptions'),
            detectingSpinner: document.getElementById('detectingSpinner'),
            tabConsole: document.getElementById('tabConsole'),
            tabProxy: document.getElementById('tabProxy'),
            contentConsole: document.getElementById('contentConsole'),
            contentProxy: document.getElementById('contentProxy'),
            btnSingleScript: document.getElementById('btnSingleScript'),
            btnBatchScript: document.getElementById('btnBatchScript'),
            codeBlock: document.getElementById('codeBlock'),
            btnCopyScript: document.getElementById('btnCopyScript'),
            btnExtractProxy: document.getElementById('btnExtractProxy'),
            errorMsg: document.getElementById('errorMsg'),
            dataContainer: document.getElementById('dataContainer'),
            jsonBlock: document.getElementById('jsonBlock'),
            btnCopyJson: document.getElementById('btnCopyJson'),
            chatBadge: document.getElementById('chatBadge')
        };

        // Preencher Endpoints
        endpoints.forEach(ep => {
            const opt = document.createElement('option');
            opt.value = ep.id;
            opt.textContent = ep.name;
            els.endpoint.appendChild(opt);
        });

        // Setup inicial
        els.rangeMax.value = state.rangeMax;

        // Injeta o Chatbot do StatusInvest (HubSpot)
        const initChatbot = () => {
            const portalId = '7171354'; 
            const script = document.createElement('script');
            script.src = `//js.hs-scripts.com/${portalId}.js`;
            script.async = true;
            script.defer = true;
            script.onload = () => {
                els.chatBadge.classList.remove('hidden');
                els.chatBadge.classList.add('flex');
            };
            document.body.appendChild(script);
        };
        initChatbot();

        // Autodetectar o tipo de ativo
        let detectTimeoutId;
        const detectCategory = async () => {
            if (!state.ticker || state.ticker.length < 4) return;
            
            els.detectingSpinner.classList.remove('hidden');
            
            try {
                const url = `https://api.allorigins.win/raw?url=${encodeURIComponent('https://statusinvest.com.br/home/mainsearchquery?q=' + state.ticker)}`;
                const res = await fetch(url);
                if (res.ok) {
                    const data = await res.json();
                    const jsonString = JSON.stringify(data).toLowerCase();
                    const searchTicker = state.ticker.toLowerCase();
                    
                    if (jsonString.includes(`/fiagro/${searchTicker}`) || jsonString.includes(`/fiagros/${searchTicker}`)) {
                        state.assetType = 'fiagro';
                    } else if (jsonString.includes(`/fundos-imobiliarios/${searchTicker}`)) {
                        state.assetType = 'fii';
                    } else if (jsonString.includes(`/acoes/${searchTicker}`)) {
                        state.assetType = 'acoes';
                    }
                    els.assetType.value = state.assetType;
                    updateUI();
                }
            } catch (e) {
                console.error("Falha ao autodetectar a categoria", e);
            } finally {
                els.detectingSpinner.classList.add('hidden');
            }
        };

        // L√≥gica de Gera√ß√£o de Script
        const getActiveEndpoint = () => endpoints.find(e => e.id === state.endpoint);

        const generateSingleScript = () => {
            const ep = getActiveEndpoint();
            return `// Extra√ß√£o √önica Inteligente: ${ep.name}
// Autodeteta o ativo e a categoria atrav√©s do URL da p√°gina
const pathParts = window.location.pathname.split('/').filter(Boolean);
const pathCategory = pathParts[0]; 
const t = pathParts[1] ? pathParts[1].toUpperCase() : '${state.ticker.toUpperCase()}';

let assetType = '${state.assetType}';
if (pathCategory === 'fiagro' || pathCategory === 'fiagros') assetType = 'fiagro';
else if (pathCategory === 'fundos-imobiliarios') assetType = 'fii';

const endpoint = '${ep.id}';
const queryParams = new URLSearchParams();
queryParams.append('${ep.param}', t);
${ep.id !== 'companytickerprovents' ? `queryParams.append('type', '${state.dataType}');` : ''}
${ep.requiresRange || state.endpoint === 'demonstracoestrimestrais' ? `queryParams.append('contabil', 'true');
queryParams.append('range.min', '${state.rangeMin}');
queryParams.append('range.max', '${state.rangeMax}');` : ''}

const url = \`https://statusinvest.com.br/\${assetType}/\${endpoint}?\${queryParams.toString()}${ep.extraParam || ''}\`;

fetch(url)
  .then(res => res.json())
  .then(dados => {
    console.log('%c‚úÖ ${ep.name} Extra√≠do!', 'color: #10b981; font-size: 14px; font-weight: bold;');
    console.log(dados);
    copy(JSON.stringify(dados, null, 2));
    console.log('%cüìã JSON copiado para a sua √°rea de transfer√™ncia!', 'color: #3b82f6;');
  })
  .catch(err => console.error('Erro:', err));`;
        };

        const generateBatchScript = () => {
            return `// Extra√ß√£o em Lote Inteligente (Descobre o Fundo Sozinho)
async function extrairTudo() {
  const pathParts = window.location.pathname.split('/').filter(Boolean);
  const pathCategory = pathParts[0];
  const t = pathParts[1] ? pathParts[1].toUpperCase() : '${state.ticker.toUpperCase()}';

  let assetType = '${state.assetType}';
  if (pathCategory === 'fiagro' || pathCategory === 'fiagros') {
    assetType = 'fiagro';
  } else if (pathCategory === 'fundos-imobiliarios') {
    assetType = 'fii';
  }

  console.log(\`%cüöÄ A iniciar extra√ß√£o em lote para \${t} (\${assetType.toUpperCase()})...\`, 'color: #8b5cf6; font-size: 14px; font-weight: bold;');
  
  const urls = {
    patrimonio: \`https://statusinvest.com.br/\${assetType}/getpatrimonioliquido?code=\${t}&type=${state.dataType}\`,
    receitas: \`https://statusinvest.com.br/\${assetType}/getreceitas?code=\${t}&type=${state.dataType}\`,
    despesas: \`https://statusinvest.com.br/\${assetType}/getdespesas?code=\${t}&type=${state.dataType}\`,
    caixa: \`https://statusinvest.com.br/\${assetType}/getcaixa?code=\${t}&type=${state.dataType}\`,
    resultado: \`https://statusinvest.com.br/\${assetType}/getresultado?code=\${t}&type=${state.dataType}\`,
    proventos: \`https://statusinvest.com.br/\${assetType}/companytickerprovents?companyName=\${t}&chartProventsType=1\`
  };

  const dadosCompletos = {};

  for (const [chave, url] of Object.entries(urls)) {
    try {
      console.log(\`A extrair \${chave}...\`);
      const res = await fetch(url);
      dadosCompletos[chave] = await res.json();
    } catch (e) {
      console.error(\`Erro ao extrair \${chave}:\`, e);
      dadosCompletos[chave] = { erro: e.message };
    }
  }

  console.log('%c‚úÖ Extra√ß√£o conclu√≠da!', 'color: #10b981; font-size: 14px; font-weight: bold;');
  console.log(dadosCompletos);

  const blob = new Blob([JSON.stringify(dadosCompletos, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = \`\${t.toLowerCase()}_dados_completos.json\`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  console.log('%cüíæ Ficheiro descarregado automaticamente!', 'color: #3b82f6;');
}

extrairTudo();`;
        };

        // Obter URL do Proxy
        const getTargetUrl = () => {
            const ep = getActiveEndpoint();
            let baseUrl = `https://statusinvest.com.br/${state.assetType}/${ep.id}`;
            
            if(ep.id === 'companytickerprovents' && state.assetType === 'fiagro') {
               baseUrl = `https://statusinvest.com.br/${state.assetType}/${ep.id}`;
            }

            const queryParams = new URLSearchParams();
            queryParams.append(ep.param, state.ticker.toUpperCase());
            
            if (ep.id !== 'companytickerprovents') {
              queryParams.append('type', state.dataType);
            }
            
            if (ep.requiresRange || state.endpoint === 'demonstracoestrimestrais') {
              queryParams.append('contabil', 'true');
              queryParams.append('range.min', state.rangeMin);
              queryParams.append('range.max', state.rangeMax);
            }

            return `${baseUrl}?${queryParams.toString()}${ep.extraParam || ''}`;
        };

        // Fun√ß√£o de Atualiza√ß√£o da UI (reatividade manual)
        const updateUI = () => {
            const ep = getActiveEndpoint();
            
            // L√≥gica para Ranges
            if (ep.requiresRange) {
                els.rangeOptions.classList.remove('hidden');
                els.rangeOptions.classList.add('grid');
            } else {
                els.rangeOptions.classList.add('hidden');
                els.rangeOptions.classList.remove('grid');
            }

            // Desativar dataType em proventos
            els.dataType.disabled = (ep.id === 'companytickerprovents');

            // Atualizar Bot√µes de Script
            els.btnSingleScript.className = state.scriptType === 'single' ? 'px-3 py-1.5 text-xs font-medium rounded-md transition-colors bg-white shadow-sm text-indigo-700' : 'px-3 py-1.5 text-xs font-medium rounded-md transition-colors text-slate-500 hover:text-slate-700';
            els.btnBatchScript.className = state.scriptType === 'batch' ? 'px-3 py-1.5 text-xs font-medium rounded-md transition-colors bg-white shadow-sm text-indigo-700' : 'px-3 py-1.5 text-xs font-medium rounded-md transition-colors text-slate-500 hover:text-slate-700';

            // Atualizar C√≥digo Pre
            els.codeBlock.textContent = state.scriptType === 'single' ? generateSingleScript() : generateBatchScript();

            // Atualizar Tabs
            els.tabConsole.className = state.activeTab === 'console' ? 'flex-1 py-4 font-medium text-sm flex justify-center items-center gap-2 transition-colors bg-indigo-50 text-indigo-700 border-b-2 border-indigo-600' : 'flex-1 py-4 font-medium text-sm flex justify-center items-center gap-2 transition-colors text-slate-600 hover:bg-slate-50';
            els.tabProxy.className = state.activeTab === 'proxy' ? 'flex-1 py-4 font-medium text-sm flex justify-center items-center gap-2 transition-colors bg-indigo-50 text-indigo-700 border-b-2 border-indigo-600' : 'flex-1 py-4 font-medium text-sm flex justify-center items-center gap-2 transition-colors text-slate-600 hover:bg-slate-50';

            // Mostrar/Ocultar Conte√∫dos das Tabs
            if (state.activeTab === 'console') {
                els.contentConsole.classList.remove('hidden');
                els.contentProxy.classList.add('hidden');
            } else {
                els.contentProxy.classList.remove('hidden');
                els.contentConsole.classList.add('hidden');
            }
        };

        // Event Listeners (Inputs)
        els.ticker.addEventListener('input', (e) => {
            state.ticker = e.target.value;
            clearTimeout(detectTimeoutId);
            detectTimeoutId = setTimeout(detectCategory, 800);
            updateUI();
        });

        els.assetType.addEventListener('change', (e) => { state.assetType = e.target.value; updateUI(); });
        els.endpoint.addEventListener('change', (e) => { state.endpoint = e.target.value; updateUI(); });
        els.dataType.addEventListener('change', (e) => { state.dataType = e.target.value; updateUI(); });
        els.rangeMin.addEventListener('input', (e) => { state.rangeMin = e.target.value; updateUI(); });
        els.rangeMax.addEventListener('input', (e) => { state.rangeMax = e.target.value; updateUI(); });

        // Event Listeners (Tabs & Bot√µes)
        els.tabConsole.addEventListener('click', () => { state.activeTab = 'console'; updateUI(); });
        els.tabProxy.addEventListener('click', () => { state.activeTab = 'proxy'; updateUI(); });
        els.btnSingleScript.addEventListener('click', () => { state.scriptType = 'single'; updateUI(); });
        els.btnBatchScript.addEventListener('click', () => { state.scriptType = 'batch'; updateUI(); });

        // Fun√ß√£o Gen√©rica de Copiar
        const handleCopy = (text, btnElement, defaultHtml) => {
            navigator.clipboard.writeText(text);
            btnElement.innerHTML = `<i data-lucide="check-circle-2" class="w-4 h-4 text-green-500"></i> Copiado!`;
            lucide.createIcons();
            setTimeout(() => {
                btnElement.innerHTML = defaultHtml;
                lucide.createIcons();
            }, 2000);
        };

        els.btnCopyScript.addEventListener('click', () => {
            const text = state.scriptType === 'single' ? generateSingleScript() : generateBatchScript();
            handleCopy(text, els.btnCopyScript, `<i data-lucide="copy" class="w-4 h-4"></i> Copiar C√≥digo`);
        });

        els.btnCopyJson.addEventListener('click', () => {
            if(state.proxyData) {
                handleCopy(JSON.stringify(state.proxyData, null, 2), els.btnCopyJson, `<i data-lucide="copy" class="w-3 h-3"></i> Copiar JSON`);
            }
        });

        // Event Listener (Extra√ß√£o Proxy)
        els.btnExtractProxy.addEventListener('click', async () => {
            els.btnExtractProxy.disabled = true;
            els.btnExtractProxy.innerHTML = `<span class="animate-pulse">A comunicar com o servidor...</span>`;
            els.errorMsg.classList.add('hidden');
            els.dataContainer.classList.add('hidden');

            const targetUrl = getTargetUrl();
            const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(targetUrl)}`;

            try {
                const response = await fetch(proxyUrl);
                if (!response.ok) throw new Error('Bloqueado pelo Cloudflare ou CORS.');
                const jsonData = await response.json();
                state.proxyData = jsonData;
                
                els.jsonBlock.textContent = JSON.stringify(jsonData, null, 2);
                els.dataContainer.classList.remove('hidden');
            } catch (err) {
                els.errorMsg.innerHTML = `<span class="font-semibold">Falha ao contornar a prote√ß√£o. Por favor, utilize o 'Script para Consola'.</span><span>O proxy n√£o conseguiu contornar o Cloudflare. Mude para o <b>M√©todo 1 (Script de Consola)</b>.</span>`;
                els.errorMsg.classList.remove('hidden');
            } finally {
                els.btnExtractProxy.disabled = false;
                els.btnExtractProxy.innerHTML = `Tentar Extra√ß√£o Direta`;
            }
        });

        // Renderiza√ß√£o Inicial
        updateUI();

    </script>
</body>
</html>